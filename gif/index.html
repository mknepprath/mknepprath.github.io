<!DOCTYPE html>
<html>
  <head>
    <title>M. Knepprath's Lab</title>
    <link rel="stylesheet" href="http://use.typekit.net/c/7a4851/p22-underground-1:n3:n6,proxima-nova-soft-1:n5:n7.P22:N:2,P25:N:2,S2x:N:2,S2z:N:2/d?3bb2a6e53c9684ffdc9a99ff195b2a62c3af7c8cd154b3fad4bafd06b6ebae7938240fad13874e8c7f10f5689586f8baea7cdc0e54c233c2720e186cf78b265aa543fc34d6d7ace7248e85a581172405d3995c44fa33c6c003eed63dc680d10dd901e00da5d2ac81f852b844815af5090f28ea0e2199f5d532adfb50b6765b158c87810d11c3e186024b85f2bc7d6908020e1b01fcb4cbbc3812b794ba267d6d2a24de83b44610493a91cb4bf367ba89d9ae0540e7f01fb47f677d9b5befb5dcb7a3154c6b3c706b41ffe755aea9b84480cb92d35095ef597bfbb700d0325df9bcb67f4a46382ee16f43958353147d684251ed73fb263fc0a2c3f63336b8434ad67409afc8b4525000c6a05958972701ba6bf45eb669658bdf2fa33832648b01b621e9b6ec6f6a87d19b4d330f1944babbb62e4986ec944c2f721365e2e1e9860446173d39260e31a63c004147ea2274a4143bd7ba922d07763b8e65726dbabaa8b390d3dbb22f3a0d913f58519541883037e7a9b9e696174504a831d5c973e7297e4f03ac9a73ef50">
    <link rel="shortcut icon" href="/images/favicon.ico">
    <link rel="apple-touch-icon" href="/images/apple-touch-icon.png">
    <style>
      /* http://meyerweb.com/eric/tools/css/reset/
        v2.0 | 20110126
        License: none (public domain)
      */

      html, body, div, span, applet, object, iframe,
      h1, h2, h3, h4, h5, h6, p, blockquote, pre,
      a, abbr, acronym, address, big, cite, code,
      del, dfn, em, img, ins, kbd, q, s, samp,
      small, strike, strong, sub, sup, tt, var,
      b, u, i, center,
      dl, dt, dd, ol, ul, li,
      fieldset, form, label, legend,
      table, caption, tbody, tfoot, thead, tr, th, td,
      article, aside, canvas, details, embed,
      figure, figcaption, footer, header, hgroup,
      menu, nav, output, ruby, section, summary,
      time, mark, audio, video {
        margin: 0;
        padding: 0;
        border: 0;
        font-size: 100%;
        font: inherit;
        vertical-align: baseline;
      }
      /* HTML5 display-role reset for older browsers */
      article, aside, details, figcaption, figure,
      footer, header, hgroup, menu, nav, section {
        display: block;
      }
      body {
        line-height: 1;
      }
      ol, ul {
        list-style: none;
      }
      blockquote, q {
        quotes: none;
      }
      blockquote:before, blockquote:after,
      q:before, q:after {
        content: '';
        content: none;
      }
      table {
        border-collapse: collapse;
        border-spacing: 0;
      }
      /*END RESET*/
      body {
        color: #fff;
        background: #000;
        font-family: proxima-nova-soft-1,proxima-nova-soft-2,"Proxima Nova Soft","Trebuchet MS","Gill Sans","Helvetica Neue",Arial,Helvetica,Geneva,sans-serif;
      }
      .fireworks {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        cursor: pointer;
      }
      .gif-index {
        position: relative;
        z-index: 1;
        display: -webkit-flex;
        -webkit-flex-direction: row;
        -webkit-flex-wrap: wrap;
        height: auto;
        min-height: 200px;
      }
      .gif-index img {
        -webkit-flex: 1 1 0;
        max-height: 500px;
      }
      .gif-index img:hover {
        -webkit-filter: brightness(1.3);
        filter: brightness(1.3);
      }
    </style>
  </head>
  <body>
    <h1>GIF PARTY</h1>
    <canvas class="fireworks"></canvas>
    <div class="gif-index">
      <img src="magnitude.gif" data-clipboard-text="http://mknepprath.com/gif/magnitude.gif"/>
      <img src="raichu.gif" data-clipboard-text="http://mknepprath.com/gif/raichu.gif"/>
      <img src="reference.gif" data-clipboard-text="http://mknepprath.com/gif/reference.gif"/>
      <img src="shia.gif" data-clipboard-text="http://mknepprath.com/gif/shia.gif"/>
      <img src="shia2.gif" data-clipboard-text="http://mknepprath.com/gif/shia2.gif"/>
      <img src="crazystarwars.gif" data-clipboard-text="http://mknepprath.com/gif/crazystarwars.gif"/>
      <img src="madbat.gif" data-clipboard-text="http://mknepprath.com/gif/madbat.gif"/>
      <img src="witnessme.gif" data-clipboard-text="http://mknepprath.com/gif/witnessme.gif"/>
      <img src="robots.gif" data-clipboard-text="http://mknepprath.com/gif/robots.gif"/>
    </div>
  <script src="../js/anime.js"></script>
  <script src="../js/clipboard.js"></script>
  <script>
    var btns = document.querySelectorAll('img');
    var clipboard = new Clipboard(btns);
  </script>
  <script>
    var iOS = !!navigator.platform && /iPad|iPhone|iPod/.test(navigator.platform);
    var ff = navigator.userAgent.indexOf('Firefox') > 0;
    var tap = ('ontouchstart' in window || navigator.msMaxTouchPoints) ? 'touchstart' : 'mousedown';
    if (iOS) document.body.classList.add('iOS');

    var fireworks = (function() {

    var getFontSize = function() {
      return parseFloat(getComputedStyle(document.documentElement).fontSize);
    }

    var canvas = document.querySelector('.fireworks');
    var ctx = canvas.getContext('2d');
    var numberOfParticules = 24;
    var distance = 200;
    var x = 0;
    var y = 0;
    var animations = [];

    var setCanvasSize = function() {
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
    }

    var updateCoords = function(e) {
      x = e.clientX || e.touches[0].clientX;
      y = e.clientY || e.touches[0].clientY;
    }

    var colors = ['#FF324A', '#31FFA6', '#206EFF', '#FFFF99'];

    var createCircle = function(x,y) {
      var p = {};
      p.x = x;
      p.y = y;
      p.color = colors[anime.random(0, colors.length - 1)];
      p.color = '#FFF';
      p.radius = 0;
      p.alpha = 1;
      p.lineWidth = 6;
      p.draw = function() {
        ctx.globalAlpha = p.alpha;
        ctx.beginPath();
        ctx.arc(p.x, p.y, p.radius, 0, 2 * Math.PI, true);
        ctx.lineWidth = p.lineWidth;
        ctx.strokeStyle = p.color;
        ctx.stroke();
        ctx.globalAlpha = 1;
      }
      return p;
    }

    var createParticule = function(x,y) {
      var p = {};
      p.x = x;
      p.y = y;
      p.color = colors[anime.random(0, colors.length - 1)];
      p.radius = anime.random(getFontSize(), getFontSize() * 2);
      p.draw = function() {
        ctx.beginPath();
        ctx.arc(p.x, p.y, p.radius, 0, 2 * Math.PI, true);
        ctx.fillStyle = p.color;
        ctx.fill();
      }
      return p;
    }

    var createParticles = function(x,y) {
      var particules = [];
      for (var i = 0; i < numberOfParticules; i++) {
        var p = createParticule(x, y);
        particules.push(p);
      }
      return particules;
    }

    var removeAnimation = function(animation) {
      var index = animations.indexOf(animation);
      if (index > -1) animations.splice(index, 1);
    }

    var animateParticules = function(x, y) {
      setCanvasSize();
      var particules = createParticles(x, y);
      var circle = createCircle(x, y);
      var particulesAnimation = anime({
        targets: particules,
        x: function(p) { return p.x + anime.random(-distance, distance); },
        y: function(p) { return p.y + anime.random(-distance, distance); },
        radius: 0,
        duration: function() { return anime.random(1200, 1800); },
        easing: 'easeOutExpo',
        complete: removeAnimation
      });
      var circleAnimation = anime({
        targets: circle,
        radius: function() { return anime.random(getFontSize() * 8.75, getFontSize() * 11.25); },
        lineWidth: 0,
        alpha: {
          value: 0,
          easing: 'linear',
          duration: function() { return anime.random(400, 600); }
        },
        duration: function() { return anime.random(1200, 1800); },
        easing: 'easeOutExpo',
        complete: removeAnimation
      });
      animations.push(particulesAnimation);
      animations.push(circleAnimation);
    }

    var mainLoop = anime({
      duration: Infinity,
      update: function() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        animations.forEach(function(anim) {
          anim.animatables.forEach(function(animatable) {
            animatable.target.draw();
          });
        });
      }
    });

    document.addEventListener(tap, function(e) {
      updateCoords(e);
      animateParticules(x, y);
    }, false);

    window.addEventListener('resize', setCanvasSize, false);

    return {
      boom: animateParticules
    }

    })();

  </script>
  </body>
</html>
